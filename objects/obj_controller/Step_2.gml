if (curState != nextState){
	lastState = curState;
	curState = nextState;
}

deltaTime = delta_time / 1000000 * 60;